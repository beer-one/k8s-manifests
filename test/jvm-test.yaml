app:
  name: jvm-test
  replicas: 0
  image: beer1/jvm-test:dev
  port: 8080
  resources:
    requests: 
      cpu: "0.5"
      memory: 512Mi
    limits:
      memory: 512Mi
  env:
    - name: JAVA_TOOL_OPTIONS
      value: |
        -XX:+AlwaysPreTouch -XX:+ExitOnOutOfMemoryError
        -XX:InitialRAMPercentage=50 -XX:MinRAMPercentage=50 -XX:MaxRAMPercentage=50
        -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=64m
        -XX:+UseParallelGC
    - name: QUEUE_SIZE
      value: "262144"
  
podLabels:
  tier: backend
  test: test
  prometheus.io/monitor-target: "spring-app"

probes:
  readiness:
    httpGet:
      path: /actuator/health/readiness
      port: 8080
    initialDelaySeconds: 10
    periodSeconds: 10
  liveness: 
    httpGet:
      path: /actuator/health/liveness
      port: 8080
    initialDelaySeconds: 120
    periodSeconds: 10

service:
  enabled: true
