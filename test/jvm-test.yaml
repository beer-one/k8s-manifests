app:
  name: jvm-test
  replicas: 1
  image: beer1/jvm-test:dev
  port: 8080
  resources:
    requests: 
      cpu: "0.1"
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 512Mi
  env:
    - name: JAVA_TOOL_OPTIONS
      value: |
        -XX:+AlwaysPreTouch -XX:+ExitOnOutOfMemoryError
        -XX:InitialRAMPercentage=10 -XX:MinRAMPercentage=10 -XX:MaxRAMPercentage=10
        -XX:MetaspaceSize=64m -XX:MaxMetaspaceSize=64m
        -XX:ReservedCodeCacheSize=48m -XX:+UseG1GC
    - name: QUEUE_SIZE
      value: "32768"
        
  
podLabels:
  tier: backend
  test: test
  prometheus.io/monitor-target: "spring-app"

probes:
  readiness:
    httpGet:
      path: /actuator/health/readiness
      port: 8080
    initialDelaySeconds: 10
    periodSeconds: 10
  liveness: 
    httpGet:
      path: /actuator/health/liveness
      port: 8080
    initialDelaySeconds: 120
    periodSeconds: 10

service:
  enabled: true
